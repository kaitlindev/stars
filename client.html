<!DOCTYPE html>
<html lang="en">
<head>
    <!-- M E T A -->
    <meta charset="utf-8">
    <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Simple app that demonstrates interaction between client and server with Ajax, PHP and JQuery.">
    <meta name="keywords" content="Ajax, PHP, HTML, CSS, JavaScript, JQuery">
    <meta name="author" content="Kaitlin Kidd">

    <!-- F A V I C O N -->
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">

    <!-- T I T L E -->
    <title>Search the Stars - Ajax / PHP / JQuery</title>

    <!-- C S S -->
    <link type="text/css" rel="stylesheet" media="screen" href="css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" media="screen" href="css/app.css">
    <link type="text/css" rel="stylesheet" media="screen" href="css/app-responsive.css">

    <!-- F O N T S -->
    <link type="text/css" rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
    <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Dosis">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- J Q U E R Y -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"></script>
    <script src="js/ajax.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/jquery.easing.1.3.js" type="text/javascript" charset="utf-8"></script>
    <script src="js/app.js" type="text/javascript" charset="utf-8" ></script>
</head>
  <body>

  <!-- N A V  -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand page-scroll" href="#hero">Search the Stars</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav" style="float: right;">
            <li><a href="#demo" class="page-scroll">Demo</a></li>
            <li><a href="#code" class="page-scroll">Code</a></li>
            <li><a href="#sources" class="page-scroll">Sources</a></li>
            <li><a href="http://kiddography.com/" target="_blank" >Contact</a></li>
          </ul>
        </div>
      </div>
    </nav>

  <!-- H E R O  -->
   <div id="hero">
       <div class="container">
           <div class="row">
               <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                   <div id="hero-heading">
                       <h1>Search the Stars</h1>
                       <h3>ajax + php application demonstrating client/server interaction</h3>
                       <hr id="hero-hr">
                       <h5>small database of stars nearest to the sun</h5>
                       <a href="#demo" class="btn scroller page-scroll">
                           <i id="arrow" class="fa fa-angle-double-down animated"></i>
                       </a>
                   </div>
               </div>
           </div>
       </div>
   </div>

 <!-- D E M O -->
  <div id="demo">
      <div class="container">
          <div class="row">
              <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                  <h2 class="heading">Demo</h2>
                  <hr>
                  <div class="clearfix"></div>
                  <p class="subheading">Search for different stars.</p>
              </div>
              <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                  <div id="wrapper">

                    <div id="leftcolumn">
                      <!-- distance filters -->
                      <h4>distance in light years from earth</h4>
                      <button id="distanceFilterOne" class="btn btn-primary star_distance_one" name="star_distance_one" type="button" value="5" onclick="getStarsByDistanceFilterOne();"> < 5 </button>
                      <button id="distanceFilterTwo" class="btn btn-primary star_distance_two" name="star_distance_two" type="button" value="10" onclick="getStarsByDistanceFilterTwo();"> 5 - 10 </button>
                      <button id="distanceFilterThree" class="btn btn-primary star_distance_three" name="star_distance_three" type="button" value="15" onclick="getStarsByDistanceFilterThree();"> 10 + </button>
                    </div>

                    <div id="rightcolumn">
                        <!-- constellation dropdown -->
                        <h4>constellation where star belongs</h4>
                        <select id="star_constellation" class="star_constellation form-control" onChange="getStarsByConstellation();">
                          <option value="" name="" class="">-- Select --</option>
                          <option value="Andromeda" name="constellation" class="constellation">Andromeda</option>
                          <option value="Aquarius" name="constellation" class="constellation">Aquarius</option>
                          <option value="Canis Major" name="constellation" class="constellation">Canis Major</option>
                          <option value="Canis Minor" name="constellation" class="constellation">Canis Minor</option>
                          <option value="Centaurus" name="constellation" class="constellation">Centaurus</option>
                          <option value="Cetus" name="constellation" class="constellation">Cetus</option>
                          <option value="Eridanus" name="constellation" class="constellation">Eridanus</option>
                          <option value="Leo" name="constellation" class="constellation">Leo</option>
                          <option value="Ophiuchus" name="constellation" class="constellation">Ophiuchus</option>
                          <option value="Piscis Austrinus" name="constellation" class="constellation">Piscis Austrinus</option>
                          <option value="Sagittarius" name="constellation" class="constellation">Sagittarius</option>
                          <option value="Ursa Major" name="constellation" class="constellation">Ursa Major</option>
                          <option value="Virgo" name="constellation" class="constellation">Virgo</option>
                        </select>
                    </div>
                  </div>

                  <!-- name search -->
                  <h4>search star name</h4>
                  <input class="form-control" type="text" id="star_name" name="star_name" onkeyup="getStarsByName();"/>
                  <div>
                      <p id="star_results">See results here.</p>
                  </div>
              </div>
          </div>
      </div>
  </div>

  <!-- C O D E -->
  <div id="code">
      <div class="container">
          <div class="row">
              <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                  <h2 class="heading">Code</h2>
                  <hr>
                  <div class="clearfix"></div>
                  <p class="subheading">Take a look inside.</p>
              </div>
              <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">

                  <!-- client/server interaction -->
                  <h4>client/server interaction</h4>

                  <p class="code-info">AJAX is essential for creating dynamic web pages where content can be updated seamlessly without the need for refreshing the whole page itself. When an event occurs, triggered by the user, data is exchanged between the browser and the server. When an http request is sent from the browser to the server, a response is created and the updated data is sent back to the browser to show the changed page content. </p>

                   <p class="code-info">In this simple app, the current web page <span style="color:#9d8186;">client.html </span>acts as a client and a PHP file <span style="color:#9d8186;">server.php </span> is used to simulate a server. Data is exchanged between the two files when Javascript is triggered by three different HTML DOM events: <a class="link" href="http://www.w3schools.com/jsref/event_onkeyup.asp" target="_blank">onkeyup</a>, <a class="link" href="http://www.w3schools.com/jsref/event_onclick.asp" target="_blank">onclick</a> and  <a class="link" href="http://www.w3schools.com/jsref/event_onchange.asp" target="_blank">onchange</a>.</p>

                  <p class="code-info">There are three different ways to search for stars: searching by name, filtering by distance in light years, and selecting the constellation that the star belongs to. Each method requires making an <a class="link" href="http://api.jquery.com/jquery.ajax/" target="_blank">ajax call</a> with the help of a JQuery script.</p>

                  <!-- app overview -->
                  <h4>app overview</h4>

                  <p class="code-info">A user will be able to search a small hard-coded array of star "objects", containing attributes such as name, distance (in light years) and the constellation that contains the star. The simulation of star "objects" will be shown in the server file code below.</p>

                  <h5>searching by name</h5>
                  <p class="code-info">As a character is entered or removed within the text field, results will be updated asynchronously. The input collected from the user will be compared against the collection of star names stored as attributes within the star objects. An ajax call is continuously sifting through the star names to find the ones that match the input.</p>

                  <h5>filtering by distance</h5>
                  <p class="code-info">There are three choices available to filter star distance from Earth: less than 5 light years, between 5 and 10 light years, and >10 light years. When any one of these buttons are clicked, an ajax call is made to find all stars that contain a distance within that range.</p>


                  <h5>selecting the constellation</h5>
                  <div id="top"></div>
                  <p class="code-info">The user can select a constellation by the drop down list that will find all the stars that can be found in that constellation. </p>

                  <!-- how it works -->
                  <h4>how it works</h4>

                  <!-- search accordion -->
                  <button id="search" class="accordion">searching by name</button>
                    <div class="panel">

                      <!-- client -->
                      <h5>client</h5>
                      <p class="code-info">For our web page acting as the client, we have a basic input field with an id and function that is triggered <a class="link" href="http://www.w3schools.com/jsref/event_onkeyup.asp" target="_blank">onkeyup:</a></p>

                      <pre><code>&lt;h4&gt;Search stars by name: &lt;/h4&gt;<br />&lt;input class="form-control" type="text" id="star_name" name="star_name" onkeyup="getStarsByName();"/&gt;</code></pre>

                      <p class="code-info">The results of the search will be appended to a paragraph tag below the input field using <a class="link" href="http://api.jquery.com/html/" target="_blank">.html( )</a>:</p>

                      <pre><code>&lt;p id="star_results"&gt;See results here.&lt;/p&gt;</code></pre>

                      <!-- ajax -->
                      <h5>Ajax</h5>

                      <p class="code-info">By importing the JQuery library, you can perform an asynchronous http request with <a class="link" href="http://api.jquery.com/jquery.ajax/" target="_blank">$.ajax.</a> The following function is needed to form the connection between client and server:</p>

                      <pre><code>function getStarsByName() { <br />&#09;$.ajax({<br />&#09;&#09;url: "/server.php", // receiving URL<br />&#09;&#09;type: "POST", // POST request<br />&#09;&#09;data: "star_name=" + $('#star_name').val(), // data is formed by the value of the id 'star_name'<br />&#09;&#09;dataType: "json", // data is sent/received in JSON format<br />&#09;&#09;success: function (response, status, http) { // if successful... <br />&#09;&#09;&#09;console.log(response);<br />&#09;&#09;&#09; var results = ''; // form a string to append to the &lt;p&gt; with id 'star_results' <br />&#09;&#09;&#09;$.each (response, function(index, item) { // for each item, find the name, distance and constellation and add to results<br />&#09;&#09;&#09;&#09;results = results + "&lt;div&gt;Name: " + item.name + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "Distance: " + item.distance + "&lt;br/&gt;"; <br />&#09;&#09;&#09;&#09;results = results + "Constellaton: " + item.constellation + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "&lt;/div&gt;";<br />&#09;&#09;&#09;});<br />&#09;&#09;&#09;$('#star_results').html(results); // append with results to the &lt;p&gt;<br />&#09;&#09;}, <br />&#09;&#09;error: function (http, status, error) { // if there's an error, show user<br />&#09;&#09;&#09;alert("Error: " + error);<br />&#09;&#09;}<br />&#09;});<br />}</code></pre>

                      <p class="code-info">In the above function, if the ajax call is successful, the name, distance and constellation attributes of the star "objects" (in JSON format) will be appended to the &lt;p&gt;, which can be seen on <span style="color:#9d8186;">client.html</span> almost instantaneously. You can see where name, distance and constellation come from by viewing the contents of the <span style="color:#9d8186;">server.php </span>below. </p>

                      <!-- server -->
                      <h5>Server</h5>
                        <p class="code-info">Within <span style="color:#9d8186;">server.php </span>, you can use <a class="link" href="http://php.net/manual/en/reserved.variables.request.php" target="_blank">$_REQUEST</a> to receive the data from the client and store it into a variable. Afterwards, you can store the value of the characters typed into the input field gathered from the data provided by the ajax call and store that into a separate variable: </p>

                        <pre><code>// receive the data from client<br />$data = $_REQUEST; // store the data retrieved from ajax call<br /><br />// [1.] Star name<br />$name = $data['star_name']; // collect the input from form input 'star_name'</code> </pre>

                        <p class="code-info">The hard-coded small-scale star database is held within a <a class="link" href="http://www.w3schools.com/php/php_arrays_multi.asp" target="_blank">php array of arrays</a> in the following format: </p>

                        <pre><code>// data array<br />$star_array = array( <br />&#09;array('attribute1' =&gt; 'value1', 'attribute2' =&gt; 'value2', 'attribute3' =&gt; 'value3' ... ), <br />&#09;array('attribute1' =&gt; 'value1', 'attribute2' =&gt; 'value2', 'attribute3' =&gt; 'value3' ... )<br />);</code></pre>

                        <p class="code-info">In this example, the array of arrays is formatted like so: </p>

                        <pre><code>$star_data = array( <br />&#09;array('name' =&gt; 'Proxima Centauri', 'distance' =&gt; '4.243',  'constellation' =&gt; 'Centaurus','evolution' =&gt; 'Red Dwarf'),<br />&#09;array('name' =&gt; 'Alpha Centauri A', 'distance' =&gt; '4.37',   'constellation' =&gt; 'Centaurus', 'evolution' =&gt; 'Main Sequence'),<br />&#09;.... <br />);</code></pre>

                       <p class="code-info">In order to send a response back to the client, we must determine if the user has found any star name matches within our php "database". Since results will be continuously updated, new results should appear or disappear as the user types or deletes characters within the text field. We can iterate through all the star names within the star objects and check that the string of characters are found within it. The more characters a user types, the more specific the results will be and less likely to find a hit. However, if a user only types a few characters, it will display more results from a broader search. We can achieve this search functionality with a simple for-loop: </p>

                        <pre><code>// results array<br />$results = array();<br /><br />for( $count = 0 ; $count &lt; count( $star_data ) ; $count++ ) {<br />&#09;if( stripos( $star_data[$count]['name'] , $name ) !== false ) {<br />&#09;&#09;array_push( $results , $star_data[$count] );<br />&#09;}<br />}</code></pre>

                        <p class="code-info">We can create a new array, $results, that will hold the final results of the search that will be sent back to the client. To store results into that array, we will first create an iterator variable, $count, that will start at value 0 and loop through the size of the $star_data array. For each iteration, $name will be checked to see if it can be found within the ['name'] attribute of the star object, and if so, the star object will be pushed to the $results array. If not, it is skipped. <a class="link" href="http://php.net/manual/en/function.stripos.php" target="_blank">stripos</a> is used to find an occurance of the value of $name within the ['name'].</p>

                        <p class="code-info">And finally, the data is returned to the client in JSON format to be read by the client: </p>

                        <pre><code>// return response as JSON<br />echo json_encode( $results);</code></pre>

                        <a id="topButton" class="btn btn-default page-scroll" href="#top" role="button">back to top</a>
                      </div>

                  <!-- filter accordion -->
                  <button id="filter" class="accordion">filtering by distance</button>
                    <div class="panel">

                      <!-- client -->
                      <h5>Client</h5>
                      <p class="code-info">The user can select a distance filter from three available buttons: </p>

                      <pre><code>&lt;button id=&quot;star_distance_one&quot; class=&quot;btn btn-primary&quot; name=&quot;star_distance_one&quot; type=&quot;button&quot; value=&quot;5&quot; onclick=&quot;getStarsByDistanceFilterOne();&quot;&gt; &lt; 5 &lt;/button&gt;<br/>&lt;button id=&quot;star_distance_two&quot; class=&quot;btn btn-primary&quot; name=&quot;star_distance_two&quot; type=&quot;button&quot; value=&quot;10&quot; onclick=&quot;getStarsByDistanceFilterTwo();&quot;&gt; 5 - 10 &lt;/button&gt;<br/>&lt;button id=&quot;star_distance_three&quot; class=&quot;btn btn-primary&quot; name=&quot;star_distance_three&quot; type=&quot;button&quot; value=&quot;15&quot; onclick=&quot;getStarsByDistanceFilterThree();&quot;&gt; 10 + &lt;/button&gt;</code></pre>

                      <p class="code-info">The results of the search will be appended to a paragraph tag below the input field using <a class="link" href="http://api.jquery.com/html/" target="_blank">.html( )</a>:</p>

                      <pre><code>&lt;p id="star_results"&gt;See results here.&lt;/p&gt;</code></pre>

                      <!-- ajax -->
                      <h5>Ajax</h5>

                      <p class="code-info">The ajax functions for the distance filtering is identical to the search function, except for the sources of the data that is to be sent to the server. The data to be sent is the value that is stored within each button: 5, 10 and 15. Each function is triggered by an <a class="link" href="http://www.w3schools.com/jsref/event_onclick.asp" target="_blank">onclick</a> event. Once again, JQuery is needed to make the $.ajax call: </p>

                      <pre><code>function getStarsByDistanceFilterOne() { <br />&#09;$.ajax({<br />&#09;&#09;url: "/server.php", // receiving URL<br />&#09;&#09;type: "POST", // POST request<br />&#09;&#09;data: "star_distance_one=" + $('#star_distance_one').val(), // data is formed by the value of the id 'star_name'<br />&#09;&#09;dataType: "json", // data is sent/received in JSON format<br />&#09;&#09;success: function (response, status, http) { // if successful... <br />&#09;&#09;&#09;console.log(response);<br />&#09;&#09;&#09; var results = ''; // form a string to append to the &lt;p&gt; with id 'star_results' <br />&#09;&#09;&#09;$.each (response, function(index, item) { // for each item, find the name, distance and constellation and add to results<br />&#09;&#09;&#09;&#09;results = results + "&lt;div&gt;Name: " + item.name + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "Distance: " + item.distance + "&lt;br/&gt;"; <br />&#09;&#09;&#09;&#09;results = results + "Constellaton: " + item.constellation + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "&lt;/div&gt;";<br />&#09;&#09;&#09;});<br />&#09;&#09;&#09;$('#star_results').html(results); // append with results to the &lt;p&gt;<br />&#09;&#09;}, <br />&#09;&#09;error: function (http, status, error) { // if there's an error, show user<br />&#09;&#09;&#09;alert("Error: " + error);<br />&#09;&#09;}<br />&#09;});<br />}</code></pre>

                      <p class="code-info">Once again, the star's name, distance and constellation will be outputted within a div that is appended to #star_results. Only those that "fit" the filter will be appended, as determined by a function within the server file, below. Also, function getStarsByDistanceFilterTwo (between 5 - 10) and getStarsByDistanceFilterThree (10+ ) have the same ajax call, only changing the button ids, star_distance_two and star_distance_three respectively.</p>

                      <!-- server -->
                      <h5>Server</h5>

                      <p class="code-info">The contents of the array 	$star_data remains the same. Also, data is received the same way, but new varaibles must be created: </p>

                      <pre><code>// receive the data from client<br />$data = $_REQUEST; // store the data retrieved from ajax call<br /><br />// [2.] Star distance<br />$distance_one = $_POST['star_distance_one'];<br />$distance_two = $_POST['star_distance_two'];<br />$distance_three = $_POST['star_distance_three'];</code> </pre>

                      <p class="code-info">Three for loops are used to compare each distance attribute of the star object within the array to designated filter values:  </p>

                      <pre><code>// results array<br />$results = array();<br /><br />// distance filters <br />$distance_far = 5; <br />$distance_farther = 10;<br /> $distance_farthest = 15;<br/><br/>// &lt;5 filter selected... <br/>if ($distance_one == $distance_far) { <br/>&#09;for( $count = 0 ; $count &lt; count( $star_data ) ; $count++ ) { <br/>&#09;&#09;if( $star_data[$count]['distance'] &lt;= $distance_far ) { <br/>&#09;&#09;&#09;array_push( $results , $star_data[$count] ); <br/>&#09;&#09;} <br/>&#09;}<br/> } <br/><br/>// 5 - 10 filter selected... <br/>if ($distance_two == $distance_farther) { <br/>&#09;for( $count = 0 ; $count &lt; count( $star_data ) ; $count++ ) { <br/>&#09;&#09;if( $star_data[$count]['distance'] &lt;= $distance_farther &amp;&amp; $star_data[$count]['distance'] &gt;= $distance_far ) { <br/>&#09;&#09;&#09;array_push( $results , $star_data[$count] ); <br/>&#09;&#09;} <br/>&#09;} <br/>} <br/><br/>// 10+ filter selected... <br/>if ($distance_three == $distance_farthest) { <br/>&#09;for( $count = 0 ; $count &lt; count( $star_data ) ; $count++ ) { <br/>&#09;&#09;if( $star_data[$count]['distance'] &gt;= $distance_farther ) { <br/>&#09;&#09;&#09;array_push( $results , $star_data[$count] ); <br/>&#09;&#09;} <br/>&#09;} <br/>}</code> </pre>

                      <p class="code-info">The results are stored into $results and encoded in JSON before being appended to the id star_results:</p>

                      <pre><code>// return response as JSON<br />echo json_encode( $results);</code></pre>

                      <a id="topButton" class="btn btn-default page-scroll" href="#top" role="button">back to top</a>
                    </div>

                    <!-- select accordion -->
                    <button id="select" class="accordion">selecting the constellation</button>
                    <div class="panel">

                      <!-- client -->
                      <h5>Client</h5>
                      <p class="code-info">Available constellations are selected by a dropdown and once an option is selected, a function is triggered by an <a class="link" href="http://www.w3schools.com/jsref/event_onchange.asp" target="_blank">onchange</a> event on the select tag:</p>

                      <pre><code>&lt;h4&gt;constellation where star belongs&lt;/h4&gt; <br/>&lt;select id=&quot;star_constellation&quot; class=&quot;star_constellation form-control&quot; onChange=&quot;getStarsByConstellation();&quot;&gt; <br/>&#09;&lt;option value=&quot;&quot; name=&quot;&quot; class=&quot;&quot;&gt;-- Select --&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Andromeda&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Andromeda&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Aquarius&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Aquarius&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Canis Major&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Canis Major&lt;/option&gt;<br/> &#09;&lt;option value=&quot;Canis Minor&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Canis Minor&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Centaurus&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Centaurus&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Cetus&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Cetus&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Eridanus&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Eridanus&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Leo&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Leo&lt;/option&gt; <br/>&#09;&lt;option value=&quot;Ophiuchus&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Ophiuchus&lt;/option&gt;<br/>&#09; &lt;option value=&quot;Piscis Austrinus&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Piscis Austrinus&lt;/option&gt; <br/>&#09;&lt;option value=&quot;Sagittarius&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Sagittarius&lt;/option&gt;<br/>&#09;&lt;option value=&quot;Ursa Major&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Ursa Major&lt;/option&gt;<br/>&#09;&lt;option value=&quot;Virgo&quot; name=&quot;constellation&quot; class=&quot;constellation&quot;&gt;Virgo&lt;/option&gt;<br/> &lt;/select&gt;</code></pre>

                      <p class="code-info">The results of the search will be appended to a paragraph tag below the input field using <a class="link" href="http://api.jquery.com/html/" target="_blank">.html( )</a>:</p>

                      <pre><code>&lt;p id="star_results"&gt;See results here.&lt;/p&gt;</code></pre>

                      <!-- ajax -->
                      <h5>Ajax</h5>

                      <p class="code-info">Function getStarsByConstellation() collects the value (constellation name) of the option that is selected from the dropdown list. When the user selects his/her first option or selects a new option, the onchange Javascript event is triggered.</p>

                      <pre><code>function getStarsByConstellation() { <br />&#09;$.ajax({<br />&#09;&#09;url: "/server.php", // receiving URL<br />&#09;&#09;type: "POST", // POST request<br />&#09;&#09;data: "star_constellation=" + $('#star_constellation').val(), // data is formed by the value of the id 'star_name'<br />&#09;&#09;dataType: "json", // data is sent/received in JSON format<br />&#09;&#09;success: function (response, status, http) { // if successful... <br />&#09;&#09;&#09;console.log(response);<br />&#09;&#09;&#09; var results = ''; // form a string to append to the &lt;p&gt; with id 'star_results' <br />&#09;&#09;&#09;$.each (response, function(index, item) { // for each item, find the name, distance and constellation and add to results<br />&#09;&#09;&#09;&#09;results = results + "&lt;div&gt;Name: " + item.name + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "Distance: " + item.distance + "&lt;br/&gt;"; <br />&#09;&#09;&#09;&#09;results = results + "Constellaton: " + item.constellation + "&lt;br/&gt;";<br />&#09;&#09;&#09;&#09;results = results + "&lt;/div&gt;";<br />&#09;&#09;&#09;});<br />&#09;&#09;&#09;$('#star_results').html(results); // append with results to the &lt;p&gt;<br />&#09;&#09;}, <br />&#09;&#09;error: function (http, status, error) { // if there's an error, show user<br />&#09;&#09;&#09;alert("Error: " + error);<br />&#09;&#09;}<br />&#09;});<br />}</code></pre>

                      <!-- server -->
                      <h5>Server</h5>

                      <p class="code-info">The contents of the array $star_data remains the same. Also, data is received the same way, but a new varaible must be created to store the selected option within <span style="color:#9d8186;">server.php </span>server.php</span>: </p>

                      <pre><code>// receive the data from client<br />$data = $_REQUEST; // store the data retrieved from ajax call<br /><br />// [3.] Star constellation<br />$constellation = $_POST['star_constellation'];</code> </pre>

                      <p class="code-info">Results are stored in the $results array after the $constellation value is matched to each star object's constellation attrbute ['constellation']. First, we need to check that $constellation is not null, and if it's not, we use a for loop to find matches: </p>

                      <pre><code>if ($constellation != null) { <br />&#09;for( $count = 0 ; $count &lt; count( $star_data ) ; $count++ ) { <br />&#09;&#09;if( stripos( $star_data[$count]['constellation'] , $constellation ) !== false ) { <br />&#09;&#09;&#09;array_push( $results , $star_data[$count] ); <br />&#09;&#09;} <br />&#09;} <br />}</code> </pre>

                      <p class="code-info">Finally, the matched results are JSON encoded and returned to the client: </p>

                      <pre><code>// return response as JSON<br />echo json_encode( $results);</code></pre>

                      <a id="topButton" class="btn btn-default page-scroll" href="#top" role="button">back to top</a>
                    </div>
              </div>
          </div>
      </div>
  </div>

  <!-- S O U R C E S -->
    <div id="sources">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3 col-sm-12 col-xs-12">
                    <h2 class="heading">Sources</h2>
                    <hr>
                    <div class="clearfix"></div>
                    <p class="subheading">A little help can go a long way.</p>
                </div>
                <div class="col-lg-9 col-md-9 col-sm-12 col-xs-12">
                    <h4>Star information</h4>
                    <ul>
                        <li><a class="link" href="http://www.atlasoftheuniverse.com/nearstar.html" target="_blank">The Atlas of the Universe - Nearest Stars</a> <span style="color: #8e8e8e;">- Detailed information about the stars nearest to the Earth created by <a class="link" href="http://www.atlasoftheuniverse.com/me.html" target="_blank">Richard Powell</span>. </span></li>
                        <li><a class="link" href="https://www.wikipedia.org/" target="_blank">Wikipedia</a> <span style="color: #8e8e8e;">- Additional star properties, including distance, constellation groups and evolutionary stages.</span></li>
                    </ul>
                    <h4>Images</h4>
                    <ul>
                        <li><a class="link" href="https://www.pexels.com/" target="_blank">Pexels</a> <span style="color: #8e8e8e;">- Free stock photos available to the public.</span></li>
                    </ul>
                    <h4>Code</h4>
                    <ul>
                        <li><a class="link" href="http://www.w3schools.com/howto/howto_js_accordion.asp" target="_blank">Accordion</a> <span style="color: #8e8e8e;">- Collapsible accordion featured on w3schools.com</span></li>
                    </ul>
                    <h4>Inspiration</h4>
                    <ul>
                        <li><a class="link" href="https://www.udemy.com/learn-ajax-using-javascript-jquery-in-2-hrs-2-projects/learn/v4/overview"  target="_blank">AJAX using Javascript and JQuery</a> <span style="color: #8e8e8e;">free Udemy Course by</span> <a class="link" href="https://www.udemy.com/user/umang-shah-4/" target="_blank">Umang Shah</a>  <span style="color: #8e8e8e;">- I completed the example app "Project 1: Planet Details Finder" introducted in Shah's course, where he walks you through completion step-by-step. Shah teaches the concepts essential to ajax and jquery very well and I highly recommend his course. This app was created by building upon the example app that he taught in his course. I do not claim ownership of the original code or project concept. Shah's code for his Udemy project can be found <a class="link" href="https://www.udemy.com/learn-ajax-using-javascript-jquery-in-2-hrs-2-projects/learn/v4/t/lecture/4967392" target="_blank">here</a>.</span></li>
                    </ul>
                </div>

            </div>
        </div>
    </div>

    <!-- A C C O R D I A N -->
    <script>
        var acc = document.getElementsByClassName("accordion");
        var i;
        for (i = 0; i < acc.length; i++) {
            acc[i].onclick = function(){
                this.classList.toggle("active");
                this.nextElementSibling.classList.toggle("show");
          }
        }
      </script>



	<!-- script references -->
		<script src="js/bootstrap.min.js"></script>
	</body>
</html>
